# baidu_index_visualization
百度指数能够反映不同地区对某关键词的搜索频率，因此可以作为不同地区对某关键词关注程度的代理变量。例如统计不同地区对财神信仰的虔诚程度，我们可以使用以下公式来衡量
<center>年平均财神搜索频率/当地人口数量</center>

然而，即使我们有了数据，单凭直观地数据浏览是难以把控其空间变化以及时间变化的，需要对其进行有效的可视化。使用百度开源的`pyecharts`可以将地域数据在地图上进行可视化，方便我们直观地观察数据的变动。因此，提出了本项目`百度指数qdata + 地图可视化

脚本`baidu.py`
使用`qdata`这个包可以爬取到百度指数，不过需要使用自己在百度指数网站的`cookie`
该代码中有三个需要调整的地方
1. 【`cookie`】将自己的`cookie`复制到对应的变量中，可以多添加几个`cookie`来规避官网检测
2. 【关键词】将自己需要的关键词填入到`keywords_list `变量中，注意：有些关键词可能并没有收录到百度指数中
3. 【间隔时间】`time.sleep(random.randint(10, 30))`中的间隔时间调的更高，可以有效降低被检测的 风险，如果你有的`cookie`较少，建议调高间隔时间
4. 运行该代码会自动在本机文件夹下创建一个名为`data_folder`的新文件夹，并保留不同省域的数据。总表数据`baidu.csv`保留到脚本同级目录下。

脚本`population.py`
各省级行政区的人口数据是在[官网](https://www.maigoo.com/top/431525.html)获取的，该网站收录了2003年到2022年的各省级行政区的人口数
1. 使用`read_html`爬取静态网站的表格数据是真的很方便
2. 然后港澳等地只有2022年的人口数，其他年度使用2022年的数据进行插补
3. 人口数据文件保存到该脚本同级目录下的`population.csv`中

脚本`data_clear`
由于不同地区的人口数不同，这就导致即使A地的百度指数比B地的百度指数高，但是就某关键词的实际关注度可能出现B地高于A地。所以我们需要使用各地人口数据对百度指数进行调整，也就是将百度指数调整为，关注程度
1. 合并和清洗后的数据保存在脚本同级目录下的`data_all.csv`文件中

脚本`pyecharts_map_visualize.py`
`pyecharts`是百度一个开源的可视化工具，能够高效的进行数据可视化，尤其是进行地域数据可视化。`pyecharts`的[官网](https://pyecharts.org/#/)
可视化代码参考了[该知乎博客](https://www.zhihu.com/question/485061256/answer/2493286153)，将整理后的数据进行可视化
1. 可视化中会将关键词关注度的五等分点作为可视化色块的分界点
2. 默认对分省域百度指数关注度的均值进行可视化，当然也可以调整`descri`变量来将其他统计量如`max`、`sum`作为可视化标准
3. 由于百度指数需要关键词，因此在本处的可视化代码中，也需要将对应的关键词填入到`keyword`变量中

